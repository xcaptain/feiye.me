---
title: "å¦‚ä½•ç”¨substrateæ¡†æ¶æ­å»ºä¸€æ¡è‡ªå·±çš„åŒºå—é“¾"
publishDate: "19 Dec 2024"
description: "æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸‹å¦‚ä½•ç”¨substrateæ¡†æ¶æ­å»ºä¸€æ¡è‡ªå®šä¹‰åŒºå—é“¾ã€‚substrateæ˜¯ä¸€ä¸ªå¾ˆæµè¡Œçš„åšå…¬é“¾çš„æ¡†æ¶ï¼Œæ¨¡å—åŒ–è®¾è®¡ï¼Œå¯¹æ–°æ‰‹åº”è¯¥æ¯”è¾ƒå‹å¥½"
tags: ["blockchain", "web3", "tutorial"]
draft: true
---

åœ¨[ä¸Šç¯‡åšå®¢](/posts/build-a-proxy-on-blockchain) ä¸­å†™åˆ°äº†æˆ‘æƒ³è¦æ­å»ºä¸€ä¸ªåŸºäºåŒºå—é“¾çš„ä»£ç†æœåŠ¡ã€‚è¿™ç¯‡æ–‡ç« å°±å…ˆè®°å½•ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•å­¦ä¹ ä½¿ç”¨ substrate æ¡†æ¶æ¥åšé“¾çš„ã€‚

## ä»€ä¹ˆæ˜¯åŒºå—é“¾

ç½‘ä¸Šæœ‰å¾ˆå¤šä»‹ç»ã€‚åœ¨æˆ‘çœ‹æ¥åŒºå—é“¾å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œè¿™ä¸ªæ•°æ®åº“ä¿å­˜çš„æ˜¯æ¯ä¸ªåœ°å€çš„ä½™é¢ã€‚æä¾›äº†æœ€åŸºæœ¬çš„ transfer æ–¹æ³•æ¥è½¬ç§»ç”¨æˆ·çš„ä½™é¢ã€‚è·Ÿæˆ‘ä»¬åœ¨é“¶è¡Œé‡Œçš„ä½™é¢æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå°±æ˜¯é“¶è¡Œé‡Œçš„ä½™é¢åªæ˜¯ä½™é¢è¡¨é‡Œçš„ä¸€æ¡è®°å½•ã€‚æœ‰å„ç§ç¨‹åºèƒ½ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¿™äº›ä¿®æ”¹éƒ½æ˜¯å¯¹çš„ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬åœ¨ç½‘ä¸Šä¹°äº†ä¸€ä»¶100å—é’±å•†å“ï¼Œè°ƒç”¨é“¶è¡Œå¡æ¥å£ä»˜è´¹äº†ï¼Œé‚£ä¹ˆå¡é‡Œçš„ä½™é¢å°±è¦å‡å°‘100å—ã€‚æœ‰æ²¡æœ‰å¯èƒ½é“¶è¡Œé‡Œæœ‰ä¸ªé»‘å®¢ï¼Œç¯¡æ”¹äº†è‡ªå·±çš„ä½™é¢ï¼Œç„¶åå»ATMæœºæç°è·‘è·¯äº†å‘¢ï¼Ÿç†è®ºä¸Šæ˜¯æœ‰å¯èƒ½çš„ã€‚åŒºå—é“¾å¦‚ä½•è§£å†³è¿™ä¸ªè®°å½•è¢«åäººç¯¡æ”¹çš„é—®é¢˜çš„å‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ°å¯†ç å­¦çš„çŸ¥è¯†ã€‚è¦è½¬è´¦å¿…é¡»è¦æœ¬äººçš„ç§é’¥ç­¾åæ‰è¡Œã€‚ç›´æ¥æ”¹åº“çš„è¡Œä¸ºä¹Ÿè¢«ç¦æ­¢äº†ï¼Œå› ä¸ºæœ‰ä¸€å †èŠ‚ç‚¹åœ¨éªŒç®—è´¦å•ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®åº“æ”¹äº†ï¼Œå…¶ä»–èŠ‚ç‚¹æ˜¯ä¸è®¤å¯è¿™ä¸ªæ”¹åŠ¨çš„ã€‚

è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„çŸ¥è¯†ï¼Œæ¯”å¦‚è¯´ p2p ç½‘ç»œï¼Œä»£å¸ç»æµå­¦ï¼Œå…±è¯†ç®—æ³•ç­‰ï¼Œè¿™äº›çŸ¥è¯†çŸ¥é“ä¸ªå¤§æ¦‚å°±è¡Œã€‚

## ä»€ä¹ˆæ˜¯ substrate

substrate æ˜¯parityå…¬å¸åœ¨å¼€å‘è‡ªå·±çš„ polkadot åŒºå—é“¾æ—¶ï¼Œä½¿ç”¨åˆ°çš„ä¸€ä¸ªæ¡†æ¶ï¼Œä»–ä»¬ä¸ºäº†è®©æ™®é€šäººä¹Ÿå¯ä»¥å¿«é€Ÿæ­å»ºä¸€æ¡åŒºå—é“¾å‡ºæ¥ï¼Œåœ¨è®¾è®¡çš„æ—¶å€™ç”¨åˆ°äº†æ¨¡å—åŒ–çš„æ–¹æ³•ã€‚polkadot ä¸»ç½‘æ˜¯åœ¨2020å¹´ä¸Šçº¿çš„ï¼Œåœ¨è¿™ä¹‹å‰è¦æƒ³è‡ªå·±å¼€å‘ä¸€æ¡åŒºå—é“¾å¾ˆå¤æ‚ï¼Œä¸€èˆ¬æ˜¯é€‰æ‹©ä¸€æ¡ç°æœ‰çš„é“¾çš„ä»£ç åº“ï¼Œæ”¹æ”¹ã€‚æ¯”å¦‚è¯´æ”¹ bitcoinï¼Œæˆ–è€…æ˜¯æ”¹ ethereum çš„ä»£ç ã€‚è¿™ç§äºŒæ¬¡å¼€å‘å°±å¾ˆå›°éš¾ï¼Œè™½ç„¶æ˜¯å¼€æºçš„ï¼Œä½†æ˜¯äººå®¶å›¢é˜Ÿåœ¨å¼€å‘çš„æ—¶å€™å°±æ²¡è€ƒè™‘è¦ç»™åˆ«çš„é¡¹ç›®ç”¨ï¼Œå¦‚æœä¸æ˜¯å¾ˆç†Ÿæ‚‰ä»£ç åº“çš„è¯ï¼Œæ”¹èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“å‡ºé”™çš„ã€‚

parity å¼€æºå‡º substrate æ¡†æ¶åï¼Œåšé“¾å°±ç®€å•å¤šäº†ï¼Œä¸å†æ˜¯ forkä¸€ä¸ªå‡ ç™¾ä¸‡è¡Œä»£ç çš„ä»£ç åº“ï¼Œæ‰¾å„ç§é…ç½®æ–‡ä»¶æ”¹ï¼Œè€Œæ˜¯æŒ‰ç…§æ¨¡ç‰ˆï¼Œå†™å‡ ç™¾è¡Œä»£ç å°±å¯ä»¥è·‘ä¸€ä¸ªç®€å•çš„åŒºå—é“¾èµ·æ¥ã€‚å¦‚æœå‘ç°è‡ªå·±ç¼ºä»€ä¹ˆå†åŠ ä»€ä¹ˆã€‚

æˆ‘ä¸æ˜¯bitcoinã€ethereumçš„æ ¸å¿ƒå¼€å‘è€…ï¼Œæˆ‘ä¸çŸ¥é“ä»–ä»¬çš„ä»£ç åº“å’‹æ”¹ï¼Œæˆ‘åªæ˜¯æƒ³åšä¸€æ¡å…¬é“¾éªŒè¯æˆ‘çš„æƒ³æ³•ï¼Œå› æ­¤å°±é€‰æ‹©äº† substrateã€‚

## å­¦ä¹ æ­¥éª¤

å®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ª[å­¦ä¹ æ­¥éª¤](https://docs.substrate.io/tutorials/build-a-blockchain/) å¤§è‡´æ˜¯ï¼š

1. æœ¬åœ°è·‘ä¸€ä¸ªå•èŠ‚ç‚¹æµ‹è¯•ç½‘
2. æœ¬åœ°è·‘ä¸€ä¸ª2èŠ‚ç‚¹æµ‹è¯•ç½‘
3. ç”¨è‡ªå·±ç”Ÿæˆçš„keyåœ¨æœ¬åœ°è·‘2ä¸ªèŠ‚ç‚¹çš„æµ‹è¯•ç½‘
4. æˆæƒæ–°çš„èŠ‚ç‚¹åŠ å…¥æœ¬åœ°æµ‹è¯•ç½‘
5. å‡çº§æœ¬åœ°æµ‹è¯•ç½‘

æŒ‰ç…§å®˜æ–¹è¿™ä¸ªæ•™ç¨‹æ“ä½œä¸€ä¸‹ï¼Œææ˜ç™½ååº”è¯¥å°±èƒ½å¼€å§‹è‡ªå»ºåŒºå—é“¾äº†ã€‚åç»­æ·»åŠ ã€åˆ é™¤èŠ‚ç‚¹è¿™å—è¦å¥½å¥½æ¼”ç»ƒä¸‹ï¼Œè¿™æ­¥ä¸ç†è§£å¥½ï¼Œæœªæ¥è‡ªå·±çš„é“¾æœ‰æ–°çš„èŠ‚ç‚¹è¦åŠ å…¥å°±ä¼šæœ‰é—®é¢˜ã€‚

æˆ‘æ˜¯ä½¿ç”¨ [https://github.com/paritytech/polkadot-sdk-minimal-template.git](https://github.com/paritytech/polkadot-sdk-minimal-template.git) è¿™ä¸ªæ¨¡ç‰ˆåº“æ¥æ¼”ç»ƒå®˜æ–¹æ•™ç¨‹çš„ï¼Œå…‹éš†åˆ°æœ¬åœ°ï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è¿›è¡Œã€‚

### æœ¬åœ°è·‘ä¸€ä¸ªå•èŠ‚ç‚¹æµ‹è¯•ç½‘

æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
cargo build
```

å®˜æ–¹çš„æ•™ç¨‹æ˜¯æ‰§è¡Œ `cargo build --release`ï¼Œæˆ‘æœ¬åœ°æµ‹è¯•å‘ç°åŠ ä¸Š `--release` è€—æ—¶ä¼šæ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸åŠ å¥½ï¼Œåˆ°æ—¶å€™éƒ¨ç½²çº¿ä¸Šçš„æ—¶å€™è‚¯å®šè¦åŠ ã€‚ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶åœ¨ `target/debug` ä¸‹ï¼Œæˆ‘æœ¬åœ°è¿™ä¸ªæ–‡ä»¶å¤¹ 27G å¤§ï¼ŒçœŸå¯æ€•ã€‚


è¿è¡ŒèŠ‚ç‚¹ï¼š

```bash
./target/debug/minimal-template-node --dev
```

å¦‚æœçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºå°±è¯´æ˜ä¸€åˆ‡æ­£å¸¸ã€‚

```
WARNING: No public address specified, validator node may not be reachable.
                                Consider setting `--public-addr` to the public IP address of this node.
                                This will become a hard requirement in future versions.
WARNING: No public address specified, validator node may not be reachable.
                                Consider setting `--public-addr` to the public IP address of this node.
                                This will become a hard requirement in future versions.
2024-12-19 17:26:31 Substrate Node    
2024-12-19 17:26:31 âœŒï¸  version 0.1.0-3004222b11e    
2024-12-19 17:26:31 â¤ï¸  by Parity Technologies <admin@parity.io>, 2017-2024    
2024-12-19 17:26:31 ğŸ“‹ Chain specification: Development    
2024-12-19 17:26:31 ğŸ·  Node name: curvy-eggnog-3039    
2024-12-19 17:26:31 ğŸ‘¤ Role: AUTHORITY    
2024-12-19 17:26:31 ğŸ’¾ Database: RocksDb at /var/folders/sb/mnlwx83j1hl4pyt_45h1psph0000gn/T/substratex8CN2y/chains/dev/db/full    

2024-12-19 17:26:40 ğŸ† Imported #2 (0xd43fâ€¦a502 â†’ 0x4e2bâ€¦f61a)    
2024-12-19 17:26:43 ğŸ™Œ Starting consensus session on top of parent 0x4e2be1b30c42ab7c2a2092cfaf6a2529444a3391fd66593ee7070830c9d1f61a (#2)    
2024-12-19 17:26:43 ğŸ Prepared block for proposing at 3 (8 ms) [hash: 0x312264b04d99d78f9fc3ff4e49a76587addbc28ebe1925f51dafd03c40c52fa3; parent_hash: 0x4e2bâ€¦f61a; extrinsics (1): [0xb022â€¦a525]    
2024-12-19 17:26:43 Consensus with no RPC sender success: CreatedBlock { hash: 0x312264b04d99d78f9fc3ff4e49a76587addbc28ebe1925f51dafd03c40c52fa3, aux: ImportedAux { header_only: false, clear_justification_requests: false, needs_justification: false, bad_justification: false, is_new_best: true }, proof_size: 0 }    
2024-12-19 17:26:43 ğŸ† Imported #3 (0x4e2bâ€¦f61a â†’ 0x3122â€¦2fa3)    
2024-12-19 17:26:44 ğŸ’¤ Idle (0 peers), best: #3 (0x3122â€¦2fa3), finalized #3 (0x3122â€¦2fa3), â¬‡ 0 â¬† 0   
```

è¿™æ®µæ—¥å¿—è¯´æ˜äº†ï¼š

1. Role: AUTHORITY è¯´æ˜è¿™ä¸ªèŠ‚ç‚¹æ˜¯éªŒè¯äººèŠ‚ç‚¹
2. Chain specification: Development è¯´æ˜è¿™ä¸ªèŠ‚ç‚¹æ˜¯ä½¿ç”¨çš„å¼€å‘ç¯å¢«çš„è§„æ ¼
3. Node name: curvy-eggnog-3039 è¯´æ˜è¿™ä¸ªèŠ‚ç‚¹çš„åå­—æ˜¯ curvy-eggnog-3039
4. Database: RocksDb at /var/folders/sb/mnlwx83j1hl4pyt_45h1psph0000gn/T/substratex8CN2y/chains/dev/db/full è¯´æ˜è¿™ä¸ªèŠ‚ç‚¹çš„æ•°æ®åº“æ˜¯ RocksDbï¼Œè·¯å¾„æ˜¯ /var/folders/sb/mnlwx83j1hl4pyt_45h1psph0000gn/T/substratex8CN2y/chains/dev/db/full
5. Imported #3 (0x4e2bâ€¦f61a â†’ 0x3122â€¦2fa3) è¯´æ˜è¿™ä¸ªèŠ‚ç‚¹å·²ç»åŒæ­¥åˆ°äº†åŒºå—é«˜åº¦ä¸º3çš„åŒºå—ã€‚è¯´æ˜¯è¯´åŒæ­¥ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªåŒºå—å°±æ˜¯å®ƒè‡ªå·±ç”Ÿæˆçš„ï¼Œæ²¡è·Ÿå…¶ä»–èŠ‚ç‚¹è¿›è¡Œå…±è¯†ã€‚

åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ï¼Œè¿™ä¸ªç¯å¢ƒä¸€èˆ¬æ˜¯ç”¨æ¥æµ‹è¯•èŠ‚ç‚¹é‡Œçš„ä»£ç å¯¹ä¸å¯¹ï¼Œæ¯”å¦‚æˆ‘æƒ³æŠŠä»£ç†é›†æˆåˆ°åŒºå—é“¾ï¼Œæˆ‘å°±å¯ä»¥è¿™ä¹ˆå¯åŠ¨é“¾ï¼Œç„¶åçœ‹çœ‹ 8080 ç«¯å£æœ‰æ²¡å¼€ï¼Œèƒ½ä¸èƒ½æ­£å¸¸å¤„ç†ä»£ç†è¯·æ±‚ã€‚

### æœ¬åœ°è·‘ä¸€ä¸ª2èŠ‚ç‚¹æµ‹è¯•ç½‘

ä¸Šé¢ä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰ç½‘ç»œè¿™ä¸ªæ¦‚å¿µï¼Œ2èŠ‚ç‚¹å°±ç®—æ˜¯æœ‰ç½‘ç»œäº†ï¼Œæˆ‘é€ çš„åŒºå—å¯ä»¥åŒæ­¥ç»™ä½ ï¼Œä½ é€ çš„å—åŒæ­¥ç»™æˆ‘ï¼Œ2ä¸ªèŠ‚ç‚¹çš„ç½‘ç»œè·‘é€šäº†ï¼Œé‚£ä¹ˆæ‰©å±•åˆ°3ä¸ªã€4ä¸ªä¹ƒè‡³æ›´å¤šèŠ‚ç‚¹çš„æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚



