---
title: "从零用Maui构建一个RSS阅读器"
publishDate: "10 Dec 2024"
description: "今晚浏览github，看到微软最流行的客户端软件是一个WinUI demo，然后看到相关应用里推荐了一个Rss Feed，这个app好几年没更新了，顿时想到用Maui再构建一个"
tags: [".NET", "maui"]
draft: true
---

六月份的时候用 .net8 + Maui 做了一个语音计算器，然后上架到google play store了，一个很简单的app，就是因为那时候AI做算术很不准确，但是识别文本已经很准确了，所以我这个
APP做的事情是让AI把语音或者输入的表达式，转化为计算机可求解的表达式，然后再求值。现在半年过去了，AI水平在飞速发展，不仅仅做算术的能力上去了，连奥数都能做了，所以我那个
计算器已经过时了，也不打算再去更新了。

上个月 .net 发布了 9.0，一直没想好做点啥，今晚想到拿 .net9 + maui + phi3 + rss 做一个app，方便用户阅读新闻，还可以将阅读内容提交给RAG，做本地的知识库，比那些笔记
软件做知识库要好，大部分人都是看得多写得少。

## Maui 基础知识回顾

看了一下 .net9 的maui更新，基本都是性能的优化以及bug修复，没啥破坏性更新，挺好，说明微软的接口很稳定。

我对 Maui 的认知就是跟 `svelte` 和 `blazor` 都很像，我们做web app的时候，不用对css引擎、js引擎有很深的理解，就能做出看得过去的网页来，maui app也类似，都是数据驱动的开发。
`xaml` 就等于是 `.svelte` 文件，dotnet 在build的过程中会把 `.xaml` 文件编译为 `.cs` 文件，然后跟 maui 内置的图形库链接，得到一个图像界面的程序。我们不用关心一个窗口
是怎么渲染出来的，也不用关心一个按钮是怎么画到一个窗口上的，底层渲染是用类似 opengl 之类的库实现的。我们只要学习 xaml 语法， mvvm 编程思想以及各种平台的接口就行。

对于 xaml，很多人觉得不适合拿来定义UI，我觉得还好，我不太喜欢 react 和 flutter 这种用代码来表示UI的方式，如果xml都不适合用来描述UI，那么jsx，dart语言只会更不合适。
我喜欢 svelte, razor 这种形式，一个svelte文件里面包含了 html，script，css，编译器把他们编译在一起，很直观就看出了当前组件的布局是什么样。

### MVVM

做前端就是做页面，按理来说只要有 View 就行，但是因为前端还要处理各种用户交互，比如说点击按钮之类的，所以要写一些业务逻辑。这些业务逻辑放哪里呢？有的人说放 `.xaml.cs` 里面，在
这个 `.xaml.cs` 里面放对应的 Context，然后在 `.xaml` 里面去绑定它，这种方式比较直观，但是如果页面复杂涉及到多个页面状态的更新，就不好办了，这时候可以把一些公共的状态存放在
`Models` 里，这样多个 View 依赖同一个 Model 可以实现状态共享。但是这种方式也有个弊端就是 Model 的变更不是双向监听的，在前端领域叫 Reactive。拿我比较熟悉的 svelte 来举例，
svelte5实现响应式的状态，是通过 rune 来实现的，这里编译器做了额外的工作，让所有依赖 rune 的地方都会自动更新，但是 Maui 这里默认没有这么先进的东西，当初设计这个库的时候可能只
想着描述 UI，没考虑状态维护这块，就像最早react刚出来时，也只是用jsx来描述UI，状态维护要通过redux来实现，不过前端框架这些年的更新，基本自带了状态维护的功能，svelte的rune就是
一个很好的例子。

Maui 是通过社区提供的 `CommunityToolkit.Mvvm` 库来实现反应式编程的，跟前端里的状态维护差不多，就是一套共享状态的规范。



